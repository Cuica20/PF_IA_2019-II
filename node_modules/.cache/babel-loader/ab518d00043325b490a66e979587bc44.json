{"ast":null,"code":"import _objectSpread from \"/Users/datascience/belcorp/repo-pro-12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/Users/datascience/belcorp/repo-pro-12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/datascience/belcorp/repo-pro-12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/datascience/belcorp/repo-pro-12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/datascience/belcorp/repo-pro-12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/datascience/belcorp/repo-pro-12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/datascience/belcorp/repo-pro-12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/datascience/belcorp/repo-pro-12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/datascience/belcorp/repo-pro-12/src/views/caracteristicasFoto.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport { createMatcher, isFaceDetectionModelLoaded } from '../api/face';\nimport { JSON_PROFILE } from '../common/profile';\nvar INIT_STATE = {\n  url: null,\n  imageURL: null,\n  fullDesc: null,\n  imageDimension: null,\n  error: null,\n  loading: false\n};\n\nvar CaracteristicasFoto =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CaracteristicasFoto, _Component);\n\n  function CaracteristicasFoto(props) {\n    var _this;\n\n    _classCallCheck(this, CaracteristicasFoto);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CaracteristicasFoto).call(this, props));\n    _this.matcher =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var faceMatcher;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = createMatcher;\n              _context.next = 3;\n              return JSON_PROFILE();\n\n            case 3:\n              _context.t1 = _context.sent;\n              _context.next = 6;\n              return (0, _context.t0)(_context.t1);\n\n            case 6:\n              faceMatcher = _context.sent;\n\n              _this.setState({\n                faceMatcher: faceMatcher\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.handleFileChange =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(event) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this.resetState();\n\n                if (!(event.target.files.length > 0)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                _context2.next = 4;\n                return _this.setState({\n                  imageURL: URL.createObjectURL(event.target.files[0]),\n                  loading: true\n                });\n\n              case 4:\n                _this.handleImageChange();\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleURLChange = function (event) {\n      _this.setState({\n        url: event.target.value\n      });\n    };\n\n    _this.handleButtonClick =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var blob;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _this.resetState();\n\n              _context3.next = 3;\n              return fetch(_this.state.url).then(function (r) {\n                return r.blob();\n              }).catch(function (error) {\n                return _this.setState({\n                  error: error\n                });\n              });\n\n            case 3:\n              blob = _context3.sent;\n\n              if (!!blob && blob.type.includes('image')) {\n                _this.setState({\n                  imageURL: URL.createObjectURL(blob),\n                  loading: true\n                });\n\n                _this.handleImageChange();\n              }\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    _this.handleDescriptorsCheck = function (event) {\n      _this.setState({\n        showDescriptors: event.target.checked\n      });\n    };\n\n    _this.resetState = function () {\n      _this.setState(_objectSpread({}, INIT_STATE));\n    };\n\n    _this.state = _objectSpread({}, INIT_STATE, {\n      faceMatcher: null,\n      showDescriptors: false,\n      isModelLoaded: !!isFaceDetectionModelLoaded(),\n      caracteristicas: []\n    });\n    return _this;\n  }\n\n  _createClass(CaracteristicasFoto, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get('../json/caracteristicasFoto.json').then(function (response) {\n        return _this2.setState({\n          caracteristicas: response.data\n        });\n      });\n    }\n  }, {\n    key: \"renderUsers\",\n    value: function renderUsers() {\n      var caracteristicas = this.state.caracteristicas;\n      return caracteristicas.map(function (user) {\n        return React.createElement(\"div\", {\n          key: user.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }, user.first_name, \" \", user.last_name);\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.resetState();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, this.renderUsers());\n      /*return (\n        <div style={{\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center'\n          }}\n        >\n          <div\n            style={{\n              position: 'relative'\n            }}\n          >\n            <table>\n              <tr>\n                <th>Nombre Cliente</th>\n                <th>Edad</th>\n                <th>Sexo</th>\n                <th>Estado Emocional</th>\n              </tr>\n              <tr>\n                <td>Victor Villacorta</td>\n                <td>30</td>\n                <td>Male</td>\n                <td>Neutral</td>\n              </tr>\n              <tr>\n                <td>Javier Cuicapuza</td>\n                <td>28</td>\n                <td>Male</td>\n                <td>Happy</td>\n              </tr>\n              <tr>\n                <td>Jhosep Vega</td>\n                <td>36</td>\n                <td>Male</td>\n                <td>Happy</td>\n              </tr>\n              <tr>\n                <td>Jonathan Quiza</td>\n                <td>27</td>\n                <td>Male</td>\n                <td>Neutral</td>\n              </tr>\n              <tr>\n                <td>Rosa Soto</td>\n                <td>27</td>\n                <td>Female</td>\n                <td>Happy</td>\n              </tr>\n            </table>\n          </div>\n         </div>\n      );*/\n    }\n  }]);\n\n  return CaracteristicasFoto;\n}(Component);\n\nexport default withRouter(CaracteristicasFoto);","map":{"version":3,"sources":["/Users/datascience/belcorp/repo-pro-12/src/views/caracteristicasFoto.js"],"names":["React","Component","axios","withRouter","createMatcher","isFaceDetectionModelLoaded","JSON_PROFILE","INIT_STATE","url","imageURL","fullDesc","imageDimension","error","loading","CaracteristicasFoto","props","matcher","faceMatcher","setState","handleFileChange","event","resetState","target","files","length","URL","createObjectURL","handleImageChange","handleURLChange","value","handleButtonClick","fetch","state","then","r","blob","catch","type","includes","handleDescriptorsCheck","showDescriptors","checked","isModelLoaded","caracteristicas","get","response","data","map","user","id","first_name","last_name","renderUsers"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios'\nimport { withRouter } from 'react-router-dom';\nimport {\n  createMatcher,\n  isFaceDetectionModelLoaded\n} from '../api/face';\nimport { JSON_PROFILE } from '../common/profile';\n\nconst INIT_STATE = {\n  url: null,\n  imageURL: null,\n  fullDesc: null,\n  imageDimension: null,\n  error: null,\n  loading: false\n};\n\nclass CaracteristicasFoto extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...INIT_STATE,\n      faceMatcher: null,\n      showDescriptors: false,\n      isModelLoaded: !!isFaceDetectionModelLoaded(),\n      caracteristicas: []\n    };\n  }\n\n  componentDidMount() {\n    axios.get('../json/caracteristicasFoto.json')\n        .then(response => this.setState({ caracteristicas: response.data }))\n  }\n\n  renderUsers() {\n    const { caracteristicas } = this.state\n\n    return caracteristicas.map( user => (\n        <div key={user.id}>{user.first_name} {user.last_name}</div>\n    ))\n  }\n\n  componentWillMount() {\n    this.resetState();\n  }\n\n\n  matcher = async () => {\n    const faceMatcher = await createMatcher(await JSON_PROFILE());\n    this.setState({ faceMatcher });\n  };\n\n  handleFileChange = async event => {\n    this.resetState();\n    if(event.target.files.length > 0){\n      await this.setState({\n        imageURL: URL.createObjectURL(event.target.files[0]),\n        loading: true\n      });\n      this.handleImageChange();\n    }\n  };\n\n  handleURLChange = event => {\n    this.setState({ url: event.target.value });\n  };\n\n  handleButtonClick = async () => {\n    this.resetState();\n    let blob = await fetch(this.state.url)\n      .then(r => r.blob())\n      .catch(error => this.setState({ error }));\n\n    if (!!blob && blob.type.includes('image')) {\n      this.setState({\n        imageURL: URL.createObjectURL(blob),\n        loading: true\n      });\n      this.handleImageChange();\n    }\n  };\n\n\n  handleDescriptorsCheck = event => {\n    this.setState({ showDescriptors: event.target.checked });\n  };\n\n  resetState = () => {\n    this.setState({ ...INIT_STATE });\n  };\n  render() {\n    return <div>{ this.renderUsers() }</div>\n\n    /*return (\n      <div style={{\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center'\n        }}\n      >\n        <div\n          style={{\n            position: 'relative'\n          }}\n        >\n          <table>\n            <tr>\n              <th>Nombre Cliente</th>\n              <th>Edad</th>\n              <th>Sexo</th>\n              <th>Estado Emocional</th>\n            </tr>\n            <tr>\n              <td>Victor Villacorta</td>\n              <td>30</td>\n              <td>Male</td>\n              <td>Neutral</td>\n            </tr>\n            <tr>\n              <td>Javier Cuicapuza</td>\n              <td>28</td>\n              <td>Male</td>\n              <td>Happy</td>\n            </tr>\n            <tr>\n              <td>Jhosep Vega</td>\n              <td>36</td>\n              <td>Male</td>\n              <td>Happy</td>\n            </tr>\n            <tr>\n              <td>Jonathan Quiza</td>\n              <td>27</td>\n              <td>Male</td>\n              <td>Neutral</td>\n            </tr>\n            <tr>\n              <td>Rosa Soto</td>\n              <td>27</td>\n              <td>Female</td>\n              <td>Happy</td>\n            </tr>\n          </table>\n        </div>\n\n      </div>\n    );*/\n  }\n}\n\nexport default withRouter(CaracteristicasFoto);\n"]},"metadata":{},"sourceType":"module"}